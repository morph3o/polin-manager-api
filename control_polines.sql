-- MySQL Script generated by MySQL Workbench
-- Sun Nov 26 02:36:52 2017
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema CONTROL_POLINES
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `CONTROL_POLINES` ;

-- -----------------------------------------------------
-- Schema CONTROL_POLINES
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `CONTROL_POLINES` DEFAULT CHARACTER SET latin1 COLLATE latin1_spanish_ci ;
USE `CONTROL_POLINES` ;

-- -----------------------------------------------------
-- Table `CONTROL_POLINES`.`TBL_USUARIO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CONTROL_POLINES`.`TBL_USUARIO` ;

CREATE TABLE IF NOT EXISTS `CONTROL_POLINES`.`TBL_USUARIO` (
  `ID_USER` INT NOT NULL AUTO_INCREMENT,
  `RUT` VARCHAR(9) NULL,
  `NOMBRE` VARCHAR(30) NULL,
  `TELEFONO_FIJO` VARCHAR(20) NULL,
  `TELEFONO_MOVIL` VARCHAR(20) NULL,
  `DIRECCION` VARCHAR(50) NULL,
  `EMAIL` VARCHAR(30) NULL,
  `EMPRESA` VARCHAR(30) NULL,
  PRIMARY KEY (`ID_USER`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CONTROL_POLINES`.`TBL_DEF_TIPO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CONTROL_POLINES`.`TBL_DEF_TIPO` ;

CREATE TABLE IF NOT EXISTS `CONTROL_POLINES`.`TBL_DEF_TIPO` (
  `ID_DEF_TIPO` INT NOT NULL AUTO_INCREMENT,
  `DESCRIPCION` VARCHAR(20) NULL,
  PRIMARY KEY (`ID_DEF_TIPO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CONTROL_POLINES`.`TBL_DEF_ESTACION`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CONTROL_POLINES`.`TBL_DEF_ESTACION` ;

CREATE TABLE IF NOT EXISTS `CONTROL_POLINES`.`TBL_DEF_ESTACION` (
  `ID_DEF_ESTACION` INT NOT NULL AUTO_INCREMENT,
  `ID_TIPO_ESTACION` INT NULL COMMENT 'INDICA SI ES DE CARGA, RETORNO, ETC.',
  `DESCRIPCION` VARCHAR(50) NULL,
  `ANCHO` INT NULL,
  `POSICIONES` TINYINT NULL,
  `DIAGRAMA` BLOB NULL,
  PRIMARY KEY (`ID_DEF_ESTACION`),
  INDEX `ITE_idx` (`ID_TIPO_ESTACION` ASC),
  CONSTRAINT `ITE`
    FOREIGN KEY (`ID_TIPO_ESTACION`)
    REFERENCES `CONTROL_POLINES`.`TBL_DEF_TIPO` (`ID_DEF_TIPO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CONTROL_POLINES`.`TBL_CREAR_ESTACION`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CONTROL_POLINES`.`TBL_CREAR_ESTACION` ;

CREATE TABLE IF NOT EXISTS `CONTROL_POLINES`.`TBL_CREAR_ESTACION` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ID_TIPO` INT NULL,
  `DESCRIPCION` VARCHAR(50) NULL,
  `MARCA` INT NULL,
  `MODELO` VARCHAR(25) NULL,
  `COLOR` VARCHAR(20) NULL,
  `PESO` INT NULL,
  `CODE_1` VARCHAR(20) NULL,
  `CODE_2` VARCHAR(20) NULL,
  `GARANTIA_TON` INT NULL,
  `GARANTIA_MESES` INT NULL,
  `GARANTIA_INICIO` DATE NULL,
  `GARANTIA_FIN` DATE NULL,
  `GARANTIA_CADUCA` DATE NULL,
  PRIMARY KEY (`ID`),
  INDEX `ITCE_idx` (`ID_TIPO` ASC),
  CONSTRAINT `ITCE`
    FOREIGN KEY (`ID_TIPO`)
    REFERENCES `CONTROL_POLINES`.`TBL_DEF_ESTACION` (`ID_DEF_ESTACION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CONTROL_POLINES`.`TBL_DEF_CONECTOR`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CONTROL_POLINES`.`TBL_DEF_CONECTOR` ;

CREATE TABLE IF NOT EXISTS `CONTROL_POLINES`.`TBL_DEF_CONECTOR` (
  `ID_DEF_CON` INT NOT NULL AUTO_INCREMENT,
  `DESCRIPCION` VARCHAR(45) NULL,
  PRIMARY KEY (`ID_DEF_CON`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CONTROL_POLINES`.`TBL_DEF_POLIN`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CONTROL_POLINES`.`TBL_DEF_POLIN` ;

CREATE TABLE IF NOT EXISTS `CONTROL_POLINES`.`TBL_DEF_POLIN` (
  `ID_DEF_POLIN` INT NOT NULL AUTO_INCREMENT,
  `ID_TIPO_POLIN` INT NULL,
  `DESCRIPCION` VARCHAR(50) NULL,
  `LARGO` INT NULL,
  `DIAMETRO` INT NULL,
  `EJE` INT NULL,
  `ID_DEF_CONECTOR` INT NULL,
  `DIAGRAMA` BLOB NULL,
  PRIMARY KEY (`ID_DEF_POLIN`),
  INDEX `ITP_idx` (`ID_TIPO_POLIN` ASC),
  INDEX `ID_DEF_CONECTOR_idx` (`ID_DEF_CONECTOR` ASC),
  CONSTRAINT `ITP`
    FOREIGN KEY (`ID_TIPO_POLIN`)
    REFERENCES `CONTROL_POLINES`.`TBL_DEF_TIPO` (`ID_DEF_TIPO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_DEF_CONECTOR`
    FOREIGN KEY (`ID_DEF_CONECTOR`)
    REFERENCES `CONTROL_POLINES`.`TBL_DEF_CONECTOR` (`ID_DEF_CON`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CONTROL_POLINES`.`TBL_CREAR_POLIN`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CONTROL_POLINES`.`TBL_CREAR_POLIN` ;

CREATE TABLE IF NOT EXISTS `CONTROL_POLINES`.`TBL_CREAR_POLIN` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ID_TIPO` INT NULL,
  `DESCRIPCION` VARCHAR(50) NULL,
  `MARCA` INT NULL,
  `MODELO` VARCHAR(25) NULL,
  `COLOR` VARCHAR(20) NULL,
  `PESO` INT NULL,
  `CODE_1` VARCHAR(20) NULL,
  `CODE_2` VARCHAR(20) NULL,
  `GARANTIA_TON` INT NULL,
  `GARANTIA_MESES` INT NULL,
  `GARANTIA_INICIO` DATE NULL,
  `GARANTIA_FIN` DATE NULL,
  `GARANTIA_CADUCA` DATE NULL,
  PRIMARY KEY (`ID`),
  INDEX `ICTP_idx` (`ID_TIPO` ASC),
  INDEX `MARCA_idx` (`MARCA` ASC),
  CONSTRAINT `ICTP`
    FOREIGN KEY (`ID_TIPO`)
    REFERENCES `CONTROL_POLINES`.`TBL_DEF_POLIN` (`ID_DEF_POLIN`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `MARCA`
    FOREIGN KEY (`MARCA`)
    REFERENCES `CONTROL_POLINES`.`TBL_USUARIO` (`ID_USER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CONTROL_POLINES`.`TBL_PROYECTOS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CONTROL_POLINES`.`TBL_PROYECTOS` ;

CREATE TABLE IF NOT EXISTS `CONTROL_POLINES`.`TBL_PROYECTOS` (
  `ID_PROYECTO` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE_PROYECTO` VARCHAR(30) NULL COMMENT 'Nombre asignado al proyecto',
  `CONTRATO` VARCHAR(20) NULL,
  `ID_MANDANTE` INT NULL,
  `ID_CLIENTE` INT NULL,
  `ID_MANDANTE_REP` INT NULL,
  `ID_CLIENTE_REP` INT NULL,
  PRIMARY KEY (`ID_PROYECTO`),
  INDEX `ID_MANDANTE_idx` (`ID_MANDANTE` ASC),
  INDEX `ID_CLIENTE_idx` (`ID_CLIENTE` ASC),
  INDEX `ID_MANDANTE_REP_idx` (`ID_MANDANTE_REP` ASC),
  INDEX `ID_CLIENTE_REP_idx` (`ID_CLIENTE_REP` ASC),
  CONSTRAINT `ID_MANDANTE`
    FOREIGN KEY (`ID_MANDANTE`)
    REFERENCES `CONTROL_POLINES`.`TBL_USUARIO` (`ID_USER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_CLIENTE`
    FOREIGN KEY (`ID_CLIENTE`)
    REFERENCES `CONTROL_POLINES`.`TBL_USUARIO` (`ID_USER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_MANDANTE_REP`
    FOREIGN KEY (`ID_MANDANTE_REP`)
    REFERENCES `CONTROL_POLINES`.`TBL_USUARIO` (`ID_USER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_CLIENTE_REP`
    FOREIGN KEY (`ID_CLIENTE_REP`)
    REFERENCES `CONTROL_POLINES`.`TBL_USUARIO` (`ID_USER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CONTROL_POLINES`.`TBL_PROYECTOS_CORREAS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CONTROL_POLINES`.`TBL_PROYECTOS_CORREAS` ;

CREATE TABLE IF NOT EXISTS `CONTROL_POLINES`.`TBL_PROYECTOS_CORREAS` (
  `ID_PROYECTO_CORREAS` INT NOT NULL AUTO_INCREMENT,
  `ID_PROYECTO` INT NULL,
  `DESCRIPCION` VARCHAR(30) NULL,
  `NOMBRE_CORREA` VARCHAR(30) NULL,
  `TAG` VARCHAR(30) NULL,
  `ANCHO` INT NULL,
  `TOTAL_POSICIONES` INT NULL,
  `TOTAL_POLEAS` INT NULL,
  `COORDENADAS_CABEZA` POINT NULL,
  `COORDENADAS_COLA` POINT NULL,
  PRIMARY KEY (`ID_PROYECTO_CORREAS`),
  INDEX `ID_PROYECTO_idx` (`ID_PROYECTO` ASC),
  CONSTRAINT `ID_PROYECTO`
    FOREIGN KEY (`ID_PROYECTO`)
    REFERENCES `CONTROL_POLINES`.`TBL_PROYECTOS` (`ID_PROYECTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CONTROL_POLINES`.`TBL_DEF_CORREA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CONTROL_POLINES`.`TBL_DEF_CORREA` ;

CREATE TABLE IF NOT EXISTS `CONTROL_POLINES`.`TBL_DEF_CORREA` (
  `ID` INT UNSIGNED NOT NULL,
  `ID_PROYECTO_CORREAS` INT NULL,
  `SECUENCIA` INT NULL,
  `COORDENADA` POINT NULL,
  `INFORMACION` VARCHAR(50) NULL,
  `ID_TERRENO` VARCHAR(10) NULL,
  `ID_DEF_ESTACION` INT NULL,
  PRIMARY KEY (`ID`),
  INDEX `ID_PROYECTO_CORREAS_idx` (`ID_PROYECTO_CORREAS` ASC),
  INDEX `ID_DEF_ESTACION_idx` (`ID_DEF_ESTACION` ASC),
  CONSTRAINT `ID_PROYECTO_CORREAS`
    FOREIGN KEY (`ID_PROYECTO_CORREAS`)
    REFERENCES `CONTROL_POLINES`.`TBL_PROYECTOS_CORREAS` (`ID_PROYECTO_CORREAS`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `ID_DEF_ESTACION`
    FOREIGN KEY (`ID_DEF_ESTACION`)
    REFERENCES `CONTROL_POLINES`.`TBL_DEF_ESTACION` (`ID_DEF_ESTACION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CONTROL_POLINES`.`TBL_DEF_POSICION`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CONTROL_POLINES`.`TBL_DEF_POSICION` ;

CREATE TABLE IF NOT EXISTS `CONTROL_POLINES`.`TBL_DEF_POSICION` (
  `ID_DEF_POSICION` INT NOT NULL AUTO_INCREMENT,
  `ID_DEF_ESTACION` INT NULL,
  `POSICION` TINYINT NULL,
  `ID_DEF_POLIN` INT NULL,
  `DESCRIPCION` VARCHAR(20) NULL,
  PRIMARY KEY (`ID_DEF_POSICION`),
  INDEX `IDE_idx` (`ID_DEF_ESTACION` ASC),
  INDEX `IDP_idx` (`ID_DEF_POLIN` ASC),
  CONSTRAINT `IDE`
    FOREIGN KEY (`ID_DEF_ESTACION`)
    REFERENCES `CONTROL_POLINES`.`TBL_DEF_ESTACION` (`ID_DEF_ESTACION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `IDP`
    FOREIGN KEY (`ID_DEF_POLIN`)
    REFERENCES `CONTROL_POLINES`.`TBL_DEF_POLIN` (`ID_DEF_POLIN`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
